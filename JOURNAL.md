<!--
  ===================    !!READ THIS NOTICE!!   ====================
  DO NOT edit this file manually. Your changes WILL BE OVERWRITTEN!
  This journal is auto generated and updated by Hack Club Blueprint.
  To edit this file, please edit your journal entries on Blueprint.
  ==================================================================
-->

## 10/18/2025 - Planning & Scouting Stage  

Before I begin Pathfinder MK IV, I need to carefully plan out what it's going to have (and mainly why MK III failed).

The primary flaws with MK III were:

-  The buck converters (along with their passives) are very hard to design well and have a high failure chance.
-  Mismatch between footprints and the actual components led to difficult soldering or reordering
- MCU is bulky, and the connection method was unreliable -> led to unusable damage.
- Not enough safety measures and connections were placed too close together -> leading to shorts and difficult debugging.
- Design was not proof checked / only used DRC, not checked by others.
- GND pour/copper underneath the NRF transmitter antenna.
- Many, close-packed, small SMD components -> hard to solder & easy to make mistakes.
- Plugging in the battery to the XT60 connector immediately powered the device -> hard, unsafe, unreliable to quickly disable.
- 4 layers instead of 2 added extra costs.
- Needs "signs of life" LEDS.

Improvements for MK IV:

- Smaller, not removed MCU, such as Teensy instead of bulky Nucleo.
- I'll need an MP1584EN (everything already built) Buck converter for the teensy itself.
- "signs of life" LEDs
- No GND pour beneath sensitive devices such as the NRF, MCU, and BNO.
- No closely packed SMD components.
- Generally smaller board size but more spread out components (switching from nucleo will allow this).
- On/Off switch connected to battery connector.
- 6-7 volt battery instead of a 7.4v battery to allow direct connection to servos, bypassing the need for buck converters.
- Generally, simple through-hole components instead of SMD.
- More capacitors to smooth out the current.
- Stronger Femur Servos.


Update: just realised that the Teensy 4.1 can't handle 6.6v, needs a buck converter, and on top of that, needs some sort of voltage divider. I'm trying to find documentation / a user manual for the Teensy 4.1, but haven't been successful. I at least found the schematic for it.

![schematic41.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzA0MCwicHVyIjoiYmxvYl9pZCJ9fQ==--6cdd019a831a5fe45a41a7548d6f8380e6504386/schematic41.png)

Planned list of components for MK IV:

- Teensy 4.1 -> MCU
- 6.6V Battery -> Power
- Switch for Batt to everything -> Safety
- NRF24IO1+ Board for communication
- BNO055 for Yaw Pitch and Roll
- Capacitors to smooth current
- LEDs to show life
- Backup connection methods for components in case of failure
- Pins that expose 5V and 3.3V
- (potentially) ESP32 camera modules.

![9ae77456fd1770b0968db4a85f565d446b0d9996 (1).png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzA0NCwicHVyIjoiYmxvYl9pZCJ9fQ==--d1b883d5e215482fe503987c999c15d0c9bda246/9ae77456fd1770b0968db4a85f565d446b0d9996%20(1).png)

Time to start KiCad!

![Screenshot 2025-10-18 at 11.29.15 AM.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzA1MCwicHVyIjoiYmxvYl9pZCJ9fQ==--4282a7e858b7b65359f5d5d9be8973ed86f07905/Screenshot%202025-10-18%20at%2011.29.15%E2%80%AFAM.png)

__new car smell__

![Screenshot 2025-10-18 at 1.35.46 PM.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzA5MSwicHVyIjoiYmxvYl9pZCJ9fQ==--7afce0fcb3b4a2209b2aa3e50a8bea3d28559f95/Screenshot%202025-10-18%20at%201.35.46%E2%80%AFPM.png)

Update: I'm spending so much time trying to figure out the battery situation. I currently have 7.4v Lipos, but those could burn out the servos without a buck converter. The main issue is finding a good battery, that isn't too heavy, that has the right voltage AND discharge rate for 18 servos.

Also, I might switch out the 6 Femur servos from Mg996rs to DS32xx.

I found a good battery:
https://www.amazon.com/Spektrum-3000mAh-Li-Fe-Receiver-Battery/dp/B00OA1UGEA/ref=sr_1_2?crid=13H6D3DB43O9&dib=eyJ2IjoiMSJ9.MpGU23OcFI8nEODOm83R84rdM2TLQZDCmzIvtfZ_5IHEzsEXrVZrDBr0ekHPzOQXjEblS2aA_906dFNwll8RYnCjeMdodoz2XZfjJmUuaMdN_4YGh4t5yybZE9BS2vQNHYxKzsSqGXy951t_150yLrk5bV9r4FMydccXqvf5lqx21JHtBmMRPpU9BDglrF7QJfs3AwVnPJ7UZ0pBHOgwdIlifo5BMbMQsWmEELmF2woPKq8TaRrC-yMRk07i-ejUZ3qrswQw3mwIQRHzYuPt-nHdyHHZXkOjtt-Vey-clUE.io-cVLLaRFK0Oz4LAF5M76Wyau1F9ELzvtz7H_c_0Uc&dib_tag=se&keywords=6.6vLiFe+battery+3000mah&qid=1760815106&sprefix=6.6vlife+battery+3000mah%2Caps%2C198&sr=8-2

and battery connector:
https://www.aliexpress.us/item/3256809807051529.html?spm=a2g0o.productlist.main.2.46f46d8brYzWSg&algo_pvid=ce5e511d-9210-4721-8271-641dcb97c35f&algo_exp_id=ce5e511d-9210-4721-8271-641dcb97c35f-1&pdp_ext_f=%7B%22order%22%3A%2214%22%2C%22eval%22%3A%221%22%2C%22fromPage%22%3A%22search%22%7D&pdp_npi=6%40dis%21USD%216.32%213.98%21%21%2144.76%2128.20%21%402102f22c17608160426501173edd8a%2112000050784260714%21sea%21US%210%21ABX%211%210%21n_tag%3A-29910%3Bd%3Ae1139cf4%3Bm03_new_user%3A-29895&curPageLogUid=revu8gxx3q8k&utparam-url=scene%3Asearch%7Cquery_from%3A%7Cx_object_id%3A1005009993366281%7C_p_origin_prod%3A



  

## 10/19/2025 - Making the Schematic  

I'm starting by routing the NRF Chip, then the BNO055

I'm having a bit of trouble with the CE and CSN point on the NRF, there isn't a designated pin on the Teensy for it. After asking google, I think I should connect CSN to a random CS pin and CE to any GPIO.

![card11a_rev3_web.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzUyOSwicHVyIjoiYmxvYl9pZCJ9fQ==--a717ea1e85e8d4382817f7fbd447d5b3d34cfee7/card11a_rev3_web.png)
^^ This image is very helpful for figuring out pinouts.

For the power system, I'm going to do an approach similar to Aecert's hexapod's power system. Battery in connects to a switch, which has three primary connections: 
 - first, connection to a buck converter breakout board (to supply the teensy with 5V), 
 - next, the battery output goes through a voltage divider and into an analog pin (to read voltage) (there's also a 3v3 rapid dropout zener diode next to it in case of voltage spikes). I made the primary resisors of the voltage divider THT, but also added pads underneath so I *could* also use SMD (or vice versa).
 - finally, there's the servo motor power line with 2 16v 1500uf electrolytic capacitors for current smoothing.

I spent a lot of time figuring out the voltage divider, and more specifically, what resistance the resistors should be.
Note: I also had to learn what a zener diode does; it seems incredibly useful. 

Update: did a lil more work, think I'll stop here.
![Screenshot 2025-10-19 at 8.27.31 PM.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzY1MywicHVyIjoiYmxvYl9pZCJ9fQ==--d10cb0f4b26da2277089e52cb44d8c370fd5ab92/Screenshot%202025-10-19%20at%208.27.31%E2%80%AFPM.png)

  

## 10/25/2025 - More routing & configuring servo lines  

(vvv this is a pinout diagram of the teensy)
![card11a_rev3_web (1)](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTUwNSwicHVyIjoiYmxvYl9pZCJ9fQ==--8ef85575918a25a0fb8935f5ae6ac86b2b4d0119/card11a_rev3_web%20(1).png)
^I used this diagram by PJRC to figure out the routing.

Since there's >9 PWM pins on either side of the Teensy, I think I'll have the Teensy be vertical on the PCB and have rows of servo pins either side.

The pinouts I decided were:
Leg 1: Top Left
- Coxa: 0
- Femur: 1
- Tibia: 2
Leg 2: Mid Left
- Coxa: 3
- Femur: 4
- Tibia: 5
Leg 3: Bot Left
- Coxa: 6
- Femur: 7
- Tibia: 8
Leg 4: Bot Right
- Coxa: 37
- Femur: 36
- Tibia: 33
Leg 5: Mid Right
- Coxa: 18
- Femur: 15
- Tibia: 14
Leg 6: Top Right
- Coxa: 23
- Femur: 22
- Tibia: 19

I had trouble finding the left side PWM pins. ![Screenshot 2025-10-25 at 12.34.22 PM](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTUyMSwicHVyIjoiYmxvYl9pZCJ9fQ==--7e952e8997a92028c96226a674f62b1e17c8534b/Screenshot%202025-10-25%20at%2012.34.22%E2%80%AFPM.png)
Notice how the pins 2-12 either aren't listed on the schematic or have a different pin title?
This is made harder by the teensy not having a user manual for which pins are essential to leave open.

![Screenshot 2025-10-25 at 1.13.10 PM](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTU0MSwicHVyIjoiYmxvYl9pZCJ9fQ==--09781e29d8cd2e758c393e6e21a7e038cf5fc20b/Screenshot%202025-10-25%20at%201.13.10%E2%80%AFPM.png)
I added two push buttons that can short the PROGRAM and ON/OFF pins to GND. Supposedly, if PROGRAM is connected to GND for 15 seconds, the default blink script is loaded. Also, if ON/OFF is connected to GND for 5 seconds, the Teensy turns off and waits for another GND connection.

I'm currently considering whether (and more importantly how) to use TOF sensors on it.
  

## 10/26/2025 - Calibrating Servos  

ugh, calibrating 18 servos...
![PXL_20251025_214402680.MP](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTc5MCwicHVyIjoiYmxvYl9pZCJ9fQ==--ec6e807b2b8ea5a5b8581d2163211fb2e6b2378d/PXL_20251025_214402680.MP.jpg)

^^ this is my setup for calibrating.

Btw, if yall wonder how I'm calibrating these servos:
I basically just use the setup in the picture, and with my arduino I make it go to 45 degrees and 135 degrees. It usually doesn't line up exactly so I end up having to tweak the numbers until I can get an exact line up on both rods.
![Screenshot 2025-10-26 at 1.14.12 PM](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTc5MiwicHVyIjoiYmxvYl9pZCJ9fQ==--a8f57aaec16fdf7cc896487d5e3fe623881512fe/Screenshot%202025-10-26%20at%201.14.12%E2%80%AFPM.png)

Next I take the two values, and plug it into a Desmos system I made to solve for the linear equations of the offsets (it solves for slope and y-intercept - Algebra 1 go brrr).
![Screenshot 2025-10-26 at 1.14.40 PM](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTc5MywicHVyIjoiYmxvYl9pZCJ9fQ==--383dda403cc12e6b6fb27b65f111e825d4f70719/Screenshot%202025-10-26%20at%201.14.40%E2%80%AFPM.png)

After that, I store the values into lists in the code (I have 2 lists for each leg, 1 contains the three slopes and the other contains the 3 intercepts.)
![Screenshot 2025-10-26 at 1.16.00 PM](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTc5NCwicHVyIjoiYmxvYl9pZCJ9fQ==--27e56e2ac013b9351e202b8cc6b2709146f3fe74/Screenshot%202025-10-26%20at%201.16.00%E2%80%AFPM.png)

Also, with these equations, I just map the values I want the servos to move to into them to get the proper orders.

![Screenshot 2025-10-26 at 4.32.05 PM](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTg1MiwicHVyIjoiYmxvYl9pZCJ9fQ==--25655bb03737ce93c2542528fcb0d5913e23d847/Screenshot%202025-10-26%20at%204.32.05%E2%80%AFPM.png)![PXL_20251026_233253564.MP](/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NTg1MywicHVyIjoiYmxvYl9pZCJ9fQ==--c8857b42bbcbc9dab9f548dafdb5396a5daf0784/PXL_20251026_233253564.MP.jpg)

This took soo lonnggggggggggg. I'm gonna get an electric screwdriver so it doesn't hurt my fingers this much.





  

